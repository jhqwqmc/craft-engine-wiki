---
title: Cloudflare R2
id: cloudflare_r2
---

## Steps

### Step 1
Create a Cloudflare account by visiting https://dash.cloudflare.com/sign-up to complete registration, then log in to the account homepage.
![](/img/cloudflare_r2_1.png)

### Step 2
Locate the `R2 Object Storage` option in the sidebar.
![](/img/cloudflare_r2_2.png)

### Step 3
Submit a payment method.

### Step 4
Click the `Create bucket` button on the right.
![](/img/cloudflare_r2_4.png)

### Step 5
Fill in the bucket name, set the location to `Automatic`, set the default storage class to `Standard`, and finally click `Create bucket`.
![](/img/cloudflare_r2_5.png)

### Step 6
Click `Settings`, select `General`, and find the `S3 API` section. Copy the provided URL.
You should get a URL like: `https://4asd4sdas4ds5ds4.r2.cloudflarestorage.com/114514`
Here, `https` will be the value for `protocol`, `4asd4sdas4ds5ds4.r2.cloudflarestorage.com` will be the value for `endpoint`, and `114514` will be the value for `bucket`.
![](/img/cloudflare_r2_6.png)

### Step 7
Click `R2 Object Storage` in the top-left corner to return to the R2 homepage, then click `API` on the right and select `Manage API tokens`. Click `Create User API token`, enter any token name, set permissions to `Object Read & Write`, specify the bucket by selecting `Apply to specific buckets only`, choose the bucket name from the dropdown (the same as the `bucket` value above), and finally click `Create User API token`.\
![](/img/cloudflare_r2_7_1.png)
![](/img/cloudflare_r2_7_2.png)
![](/img/cloudflare_r2_7_3.png)
![](/img/cloudflare_r2_7_4.png)

### Step 8
On the redirected page, locate the `Access Key ID` (to be used as `access-key-id`) and the `Secret Access Key` (to be used as `access-key-secret`). Finally, you should be able to compile the following configuration.  
![](/img/cloudflare_r2_8.png)

```yaml
resource-pack:
  delivery:
    hosting:
      - type: s3
        endpoint: "4asd4sdas4ds5ds4.r2.cloudflarestorage.com"
        bucket: "114514"
        access-key-id: "asodjhadosdnoad"
        access-key-secret: "asd541faf5asd5fs15asdf45as"
        protocol: "https"
        path-style: false
        region: "auto"
        upload-path: "server_resource_pack.zip"
        use-legacy-signature: true
        validity: 10
        rate-map:
          max-requests: 5
          reset-interval: 20
```
