---
title: ğŸ˜€ è¡¨æƒ…
id: emoji
---

:::caution

åˆ›å»ºè¡¨æƒ…éœ€è¦ç°æœ‰å›¾åƒé…ç½®ã€‚è‹¥æ‚¨ä¸ç†Ÿæ‚‰æ­¤æµç¨‹ï¼Œè¯·å‚è€ƒ[ğŸ–¼ï¸ å›¾åƒ](image.mdx)é¡µé¢ã€‚

:::

åˆ›å»ºè¡¨æƒ…éå¸¸ç®€å•â€”â€”åªéœ€å¡«å†™å‡ ä¸ªç®€å•æ˜“æ‡‚çš„å‚æ•°ã€‚ä½†ä¸å…¶ä»–æ’ä»¶ä¸åŒï¼ŒCraftEngine ä¸ºæ‚¨æä¾›äº†æ›´é«˜çš„è‡ªå®šä¹‰è‡ªç”±åº¦ï¼Œç‰¹åˆ«æ˜¯åœ¨è¡¨æƒ…åé¦ˆå†…å®¹æ–¹é¢ã€‚æ‚¨å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ–‡æœ¬æ ·å¼ã€å˜é‡ã€æ•°å­¦è¿ç®—ç­‰åŠŸèƒ½ã€‚

åŸºç¡€è¡¨æƒ…é…ç½®ç¤ºä¾‹ï¼š

```yaml
emoji:
  default:time:
    permission: emoji.time
    content: "<white><arg:emoji></white>"
    image: "default:icons:0:0"
    keywords:
      - ":time:"
```

:::tip

`<arg:emoji>` æ˜¯ä¸Šä¸‹æ–‡ç›¸å…³å‚æ•°ï¼Œç”¨äºè¿”å›å¯¹åº”è¡¨æƒ…çš„å›¾åƒè¡¨ç¤ºã€‚\
`<arg:keyword>` å°†è¿”å›é¦–ä¸ªå¯ç”¨çš„å…³é”®è¯

:::

åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œç©å®¶å¯é€šè¿‡è¾“å…¥ `:pos:` è·å–å½“å‰åæ ‡ã€‚è™½ç„¶ CraftEngine ä¸ºè¡¨æƒ…å†…å®¹æä¾›äº†é«˜åº¦å®¢åˆ¶åŒ–èƒ½åŠ›ï¼ˆç‰¹åˆ«æ˜¯ MiniMessage æ”¯æŒï¼‰ï¼Œä½†è¿™ç§çµæ´»æ€§ä¹Ÿä½¿å…¶å­¦ä¹ èµ·æ¥æ›´åŠ å¤æ‚â€”â€”å°¤å…¶æ˜¯å¯¹äºä¸ç†Ÿæ‚‰é«˜çº§æ–‡æœ¬æ ¼å¼çš„ç”¨æˆ·è€Œè¨€ã€‚

```yaml
emoji:
  default:emoji_location:
    permission: emoji.location
    content: "<hover:show_text:'ä½¿ç”¨<yellow>\"<arg:keyword>\"</yellow>æ¥å‘é€è¡¨æƒ…\"<arg:emoji>\"'><!shadow><white><arg:emoji></white></!shadow><bold>å½“å‰åæ ‡ï¼š<papi:player_x>,<papi:player_y>,<papi:player_z></bold></hover>"
    image: "default:icons:0:0"
    keywords:
      - ":pos:"
```

<div style={{textAlign: 'center'}}>
  <img src={require('/img/i18n/zh-Hans/emoji_1.png').default} alt="" />
</div>

:::tip

ä¸ºæå‡å¤æ‚é…ç½®çš„å¯è¯»æ€§ï¼Œæˆ‘ä»¬æ–°å¢äº†å¤šè¡Œæ ¼å¼æ”¯æŒã€‚CraftEngineåœ¨å¤„ç†æ—¶ä¼šè‡ªåŠ¨åˆå¹¶ä¸ºå•è¡Œå­—ç¬¦ä¸²ï¼Œä½¿å¤æ‚é…ç½®çš„ç¼–å†™å’Œç»´æŠ¤æ›´ç®€ä¾¿ï¼ŒåŒæ—¶ä¿æŒå®Œæ•´åŠŸèƒ½ã€‚

```yaml
content:
- <hover:show_text:'ä½¿ç”¨<yellow>"<arg:keyword>"</yellow>æ¥å‘é€è¡¨æƒ…"<arg:emoji>"'>
- <!shadow><white><arg:emoji></white></!shadow>
- "<bold>å½“å‰åæ ‡ï¼š<papi:player_x>,<papi:player_y>,<papi:player_z></bold>"
- </hover>
```
:::

:::info

CraftEngine ä½¿ç”¨ Paper çš„ç°ä»£èŠå¤©ç»„ä»¶ API å®ç°è¡¨æƒ…åŠŸèƒ½ã€‚ä»»ä½•ä»ä¾èµ– Bukkit æ—§ç‰ˆèŠå¤©äº‹ä»¶çš„èŠå¤©æ’ä»¶å‡ ä¹éƒ½æ— æ³•å…¼å®¹è¡¨æƒ…æ¸²æŸ“ã€‚

å·²çŸ¥å…¼å®¹çš„èŠå¤©æ’ä»¶ï¼š[**TrChat**](https://github.com/TrPlugins/TrChat)

<details>
  <summary>å¼€å‘è€…æŒ‡å—</summary>

  ```java
import io.papermc.paper.event.player.AsyncChatEvent;
import net.kyori.adventure.text.Component;
import net.kyori.adventure.text.minimessage.Context;
import net.kyori.adventure.text.minimessage.MiniMessage;
import net.kyori.adventure.text.minimessage.ParsingException;
import net.kyori.adventure.text.minimessage.tag.Tag;
import net.kyori.adventure.text.minimessage.tag.resolver.ArgumentQueue;
import net.kyori.adventure.text.minimessage.tag.resolver.TagResolver;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.annotations.Nullable;

public class ChatListener implements Listener {
    public static final String CHAT_FORMAT = "<gray><player>: <chat>";

    @EventHandler(ignoreCancelled = true)
    public void onAsyncChat(AsyncChatEvent event) {
        Component chatMessage = event.message();
        Component formattedChatMessage = MiniMessage.miniMessage().deserialize(CHAT_FORMAT, new PlayerTagResolver(event.getPlayer()), new ChatMessageTagResolver(chatMessage));
        // æ‰§è¡Œåç»­å¤„ç†
    }

    public static class PlayerTagResolver implements TagResolver {
        private final Player sender;

        public PlayerTagResolver(Player sender) {
            this.sender = sender;
        }

        @Override
        public boolean has(@NotNull String name) {
            return name.equals("player");
        }

        @Override
        public @Nullable Tag resolve(@NotNull String name, @NotNull ArgumentQueue arguments, @NotNull Context ctx) throws ParsingException {
            return Tag.inserting(Component.text(sender.getName()));
        }
    }

    public static class ChatMessageTagResolver implements TagResolver {
        private final @NotNull Component chatMessage;

        public ChatMessageTagResolver(@NotNull Component chatMessage) {
            this.chatMessage = chatMessage;
        }

        @Override
        public boolean has(@NotNull String name) {
            return name.equals("chat");
        }

        @Override
        public @Nullable Tag resolve(@NotNull String name, @NotNull ArgumentQueue arguments, @NotNull Context ctx) throws ParsingException {
            return Tag.selfClosingInserting(this.chatMessage);
        }
    }
}

  ```

</details>

:::