---
title: 🔮 Skript
id: skript
---

import SkriptCard from '@site/src/components/SkriptCard';

# ⌨️ Skript

:::tip
对于高级 Skript 用户，请使用反射来实现更高级的功能。如果您在使用 CraftEngine 提供的 Skript 功能时遇到问题，请及时向我们[反馈](https://github.com/Xiao-MoMi/craft-engine/issues/new)。如果您想要请求新的 Skript 功能并且您了解 Java，请考虑通过拉取请求贡献您的代码！
:::

:::warning
请注意，如果您在服务器加载插件时遇到错误，这可能是因为 Skript 脚本在 CraftEngine 之前加载。目前无法修复此问题，只能通过重新加载来解决。
:::

## 事件

<SkriptCard
  title="放置或破坏 CraftEngine 方块事件"
  type={{type: "Event", label: "事件"}}
  description="当放置和破坏 CraftEngine 方块时触发"
  syntax={[
    '[on] (break[ing]|1¦min(e|ing)) of (custom|ce|craft-engine) block[s] [[of] %-unsafeblockstatematchers%]',
    '[on] (plac(e|ing)|build[ing]) of (custom|ce|craft-engine) block[s] [[of] %-unsafeblockstatematchers%]'
  ]}
  values={[
    'event-block - 事件方块',
    'event-location - 事件位置',
    'event-player - 事件玩家',
    'event-world - 事件世界'
  ]}
  examples={[
    `on break of ce block default:palm_log[axis=y]:
      send "你破坏了自定义方块！" to event-player`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="放置或破坏 CraftEngine 家具事件"
  type={{type: "Event", label: "事件"}}
  description="当放置和破坏 CraftEngine 家具时触发"
  syntax={[
    '[on] (break[ing]) of [(custom|ce|craft-engine)] furniture[s] [[of] %-strings%]',
    '[on] (plac(e|ing)|build[ing]) of [(custom|ce|craft-engine)] furniture[s] [[of] %-strings%]'
  ]}
  values={[
    'event-entity - 事件实体',
    'event-location - 事件位置',
    'event-player - 事件玩家',
    'event-world - 事件世界'
  ]}
  examples={[
    `on place of custom furniture default:chinese_lantern:
      send "你放置了自定义家具！" to event-player`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="点击 CraftEngine 方块或家具事件"
  type={{type: "Event", label: "事件"}}
  description="当点击 CraftEngine 方块和家具时触发"
  syntax={[
    '[on] [(" + RIGHT + ":right|" + LEFT + ":left)(| |-)][mouse(| |-)]click[ing] of (ce|craft-engine) [on %-unsafeblockstatematchers/strings%] [(with|using|holding) %-itemtype%]',
    '[on] [(" + RIGHT + ":right|" + LEFT + ":left)(| |-)][mouse(| |-)]click[ing] of (ce|craft-engine) (with|using|holding) %itemtype% on %unsafeblockstatematchers/strings%'
  ]}
  values={[
    'event-block - 事件方块',
    'event-entity - 事件实体',
    'event-location - 事件位置',
    'event-player - 事件玩家',
    'event-world - 事件世界'
  ]}
  examples={[
    `on right-click of craft-engine on default:chinese_lantern:
       send "你点击了自定义方块！" to event-player`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="CraftEngine 重新加载事件"
  type={{type: "Event", label: "事件"}}
  description="当 CraftEngine 加载时触发"
  syntax={[
    '[on] (ce|craft(engine|-engine)) [first] (load[ed]|reload)'
  ]}
  examples={[
    `on craft-engine loaded:
      send "嘿，CraftEngine 已加载，现在可以获取 CE 物品了！" to console`,
    `on craft-engine first loaded:
      send "嘿，CraftEngine 已在服务器启用时加载，脚本现在将初始化一些内容！" to console`,
  ]}
  defaultOpen={false}
/>

## 条件

<SkriptCard
  title="CraftEngine 是否已加载"
  type={{type: "Condition", label: "条件"}}
  description="检查 CraftEngine 是否已加载"
  syntax={[
    '(ce|craft[-]engine) (has been|is) load[ed]',
    '(ce|craft[-]engine) (has not been|is not) load[ed] [yet]',
    '(ce|craft[-]engine) (hasn\'t been|isn\'t) load[ed] [yet]'
  ]}
  examples={[
    `on script load:
      stop if craft-engine has not been loaded yet
      send "脚本初始化一些内容！" to console`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="是自定义物品"
  type={{type: "Condition", label: "条件"}}
  description="检查物品是否为来自 CraftEngine 的自定义物品"
  syntax={[
    '%itemstack/itemtype/slot% (is [a[n]]|are) (custom|ce|craft-engine) item[s]',
    '%itemstack/itemtype/slot% (isn\'t|is not|aren\'t|are not) [a[n]] (custom|ce|craft-engine) item[s]'
  ]}
  examples={[
    `on mine:
      if event-player's tool is a custom item:
        send "你正在使用自定义物品挖掘" to event-player`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="是自定义方块"
  type={{type: "Condition", label: "条件"}}
  description="检查方块是否为来自 CraftEngine 的自定义方块"
  syntax={[
    '%blocks% (is|are) [a[n]] (custom|ce|craft-engine) block[s]',
    '%blocks% (is|are) (n\'t| not) [a[n]] (custom|ce|craft-engine) block[s]'
  ]}
  examples={[
    `on mine:
      if event-block is custom block:
        send "你破坏了一个自定义方块" to event-player`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="是自定义家具"
  type={{type: "Condition", label: "条件"}}
  description="检查实体是否为来自 CraftEngine 的自定义家具"
  syntax={[
    '%entities% (is|are) [a[n]] [(custom|ce|craft-engine)] furniture[s]',
    '%entities% (is|are) (n\'t| not) [a[n]] [(custom|ce|craft-engine)] furniture[s]'
  ]}
  examples={[
    `on click:
      set {_entity} to nearest pig
      if {_entity} is a ce furniture:
        send "我在做什么？" to event-player`
  ]}
  defaultOpen={false}
/>

## 表达式

<SkriptCard
  title="自定义物品"
  type={{type: "Expression", label: "表达式"}}
  description="通过命名空间ID获取自定义物品"
  syntax={[
    '[(the|a)] (custom|ce|craft-engine) item [with [namespace] id] %strings%',
  ]}
  examples={[
    `set {_item} to custom item with namespace id "default:topaz"`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="自定义物品命名空间ID"
  type={{type: "Expression", label: "表达式"}}
  description="获取自定义物品的命名空间ID"
  syntax={[
    '(custom|ce|craft-engine) item [namespace] id of %itemstack/itemtype/slot%',
    '%itemstack/itemtype/slot%\'[s] (custom|ce|craft-engine) item [namespace] id'
  ]}
  examples={[
    `set {_itemId} to craft-engine item id of player's tool`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="自定义方块命名空间ID"
  type={{type: "Expression", label: "表达式"}}
  description="获取自定义方块的命名空间ID"
  syntax={[
    '%blocks/blockdata/customblockstates%\'s (custom|ce|craft-engine) block [namespace] id',
    '(custom|ce|craft-engine) block [namespace] id of %blocks/blockdata/customblockstates%'
  ]}
  examples={[
    `on mine:
      if event-block's ce block id is "default:chinese_lantern":
        send "破坏了一个中式灯笼方块" to event-player`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="自定义方块状态"
  type={{type: "Expression", label: "表达式"}}
  description="获取自定义方块的方块状态"
  syntax={[
    '%blocks/blockdata/customblockstates%\'s (custom|ce|craft-engine) block[ ]state',
    '(custom|ce|craft-engine) block[ ]state of %blocks/blockdata/customblockstates%'
  ]}
  examples={[
    `on mine:
      send event-block's block state to event-player`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="家具命名空间ID"
  type={{type: "Expression", label: "表达式"}}
  description="从实体获取家具的命名空间ID"
  syntax={[
    '%entities%\'s [(custom|ce|craft-engine)] furniture [namespace] id',
  ]}
  examples={[
    `set {_furnitureId} to {_entity}'s craft-engine furniture id`
  ]}
  defaultOpen={false}
/>

# 效果

<SkriptCard
  title="放置自定义方块"
  type={{type: "Effect", label: "效果"}}
  description="放置一个自定义方块"
  syntax={[
    'place (custom|ce|craft-engine) block %customblockstates% [at] [%directions% %locations%]',
  ]}
  examples={[
    `place custom block default:palm_log[axis=x] at location of the player`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="放置家具"
  type={{type: "Effect", label: "效果"}}
  description="放置一个家具"
  syntax={[
    'place [(custom|ce|craft-engine)] furniture[s] %strings% [at] [%directions% %locations%]',
  ]}
  examples={[
    `place furniture "default:bench" at location of player`
  ]}
  defaultOpen={false}
/>

<SkriptCard
  title="移除家具"
  type={{type: "Effect", label: "效果"}}
  description="移除一个家具"
  syntax={[
    'remove [(custom|ce|craft-engine)] furniture %entities%',
  ]}
  examples={[
    `remove craft-engine furniture target entity`
  ]}
  defaultOpen={false}
/>
