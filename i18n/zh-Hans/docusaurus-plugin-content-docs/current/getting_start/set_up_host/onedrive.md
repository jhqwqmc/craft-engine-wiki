---
title: OneDrive
id: onedrive
---

```yaml
resource-pack:
  delivery:
    hosting:
      - type: onedrive
        use-environment-variables: false
        client-id: ""
        client-secret: ""
        refresh-token: ""
        upload-path: "server_resource_pack.zip"
        # 可选代理配置
        proxy:
          host: "127.0.0.1"
          port: 7890
```

<details>
  <summary>可用环境变量</summary>
  - CE_ONEDRIVE_CLIENT_ID
  - CE_ONEDRIVE_CLIENT_SECRET
  - CE_ONEDRIVE_REFRESH_TOKEN
</details>

## 配置教程

1. 前往 https://entra.microsoft.com/#view/Microsoft_AAD_RegisteredApps/CreateApplicationBlade/quickStartType~/null/isMSAApp~/false?Microsoft_AAD_IAM_legacyAADRedirect=true
2. 参考图片填写然后点击 `注册` 重定向一定选择 Web 并且填写 `http://localhost:8080`
   ![图片](/img/i18n/zh-Hans/host/onedrive-1.png)
3. 点击 `注册` 后点击左侧的 `应用注册`
   ![图片](/img/i18n/zh-Hans/host/onedrive-2.png)
4. 点击 `所有应用程序` 选项卡
   ![图片](/img/i18n/zh-Hans/host/onedrive-3.png)
5. 选择你刚刚创建的 `应用`
   ![图片](/img/i18n/zh-Hans/host/onedrive-4.png)
6. 看图片操作
   ![图片](/img/i18n/zh-Hans/host/onedrive-5.png)
7. 点击 `添加权限`
   ![图片](/img/i18n/zh-Hans/host/onedrive-6.png)
8. 找到 `Microsoft Graph` 点击
   ![图片](/img/i18n/zh-Hans/host/onedrive-7.png)
9. 找到 `应用程序权限` 点击
   ![图片](/img/i18n/zh-Hans/host/onedrive-8.png)
10. 看图片操作
    ![图片](/img/i18n/zh-Hans/host/onedrive-9.png)
11. 点击 `证书和密码`
    ![图片](/img/i18n/zh-Hans/host/onedrive-10.png)
12. 看图片操作
    ![图片](/img/i18n/zh-Hans/host/onedrive-11.png)
13. 看图片操作
    ![图片](/img/i18n/zh-Hans/host/onedrive-12.png)
14. 安装 python 3.10+ 以及 requests 2.32.4+ 然后 [点击这里获取](/file/i18n/zh-Hans/dropbox-onedrive.py) 执行脚本，然后执行获取程序按提示输入然后操作即可
